html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Tâches du jour
    link(rel="manifest" href="/manifest.json")
    style.

    
      body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #2c2c3e;
      display: flex;
      justify-content: center;
      color: #fff;
      }
      .container {
        display: flex;
        flex-direction: row;
        width: 100%;
        max-width: 1600px;
        gap: 40px;
      }
      .form-container, .tasks-container, .purchase-container {
        border-radius: 15px;
        padding: 20px;
        box-shadow: 5px 5px 15px rgba(0,0,0,0.5);
        background-color: #3a3a52;
      }
      .form-container { flex: 1; }
      .tasks-container { flex: 1.5; }
      .purchase-container { flex: 1; }

      /* --- Titles --- */
      .titre {
        font-family: 'Fantasy', sans-serif;
        font-size: 2.5rem;
        color: #00ffff;
        text-align: center;
        margin-bottom: 20px;
      }

      /* --- Forms --- */
      form {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      label {
        font-weight: bold;
      }
      input, textarea, select {
        width: 100%;
        padding: 8px;
        border-radius: 
      }

html(lang="fr")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Tâches du jour
    style.
      /* --- Global --- */
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #2c2c3e;
        display: flex;
        justify-content: center;
        color: #fff;
      }
      .container {
        display: flex;
        flex-direction: row;
        width: 100%;
        max-width: 1600px;
        gap: 40px;
      }
      .form-container, .tasks-container, .purchase-container {
        border-radius: 15px;
        padding: 20px;
        box-shadow: 5px 5px 15px rgba(0,0,0,0.5);
        background-color: #3a3a52;
      }
      .form-container { flex: 1; }
      .tasks-container { flex: 1.5; }
      .purchase-container { flex: 1; }

      /* --- Titles --- */
      .titre {
        font-family: 'Fantasy', sans-serif;
        font-size: 2.5rem;
        color: #00ffff;
        text-align: center;
        margin-bottom: 20px;
      }

      /* --- Forms --- */
      form {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      label {
        font-weight: bold;
      }
      input, textarea, select {
        width: 100%;
        padding: 8px;
        border-radius: 8px;
        border: 2px solid #555;
        background-color: #505070;
        color: #fff;
      }
      textarea { resize: vertical; }

      button {
        padding: 10px 20px;
        border-radius: 10px;
        border: 2px solid black;
        cursor: pointer;
        font-weight: bold;
        margin-top: 10px;
        box-shadow: 3px 3px 8px rgba(0,0,0,0.5);
        transition: all 0.3s ease;
      }
      .button-submit-taches { background-color: #007bff; color: #fff; }
      .button-submit-taches:hover { background-color: #0056b3; }

      .button-submit, .button-modify { background-color: #00aaff; color: #fff; }
      .button-submit:hover, .button-modify:hover { background-color: #0077aa; }

      .button-delete { background-color: #dc3545; color: #fff; }
      .button-delete:hover { background-color: #a71d2a; }

      /* --- Tasks --- */
      .task, .purchase-item {
        border-radius: 15px;
        padding: 10px;
        margin-bottom: 15px;
        box-shadow: 3px 3px 10px rgba(0,0,0,0.4);
        background-color: #4a4a70;
      }
      .nomQui, .nomTache, .taskDescritption, h3.course {
        margin: 5px 0;
      }
      .nomQui {
        background-color: #c6c3c3;
        color: #5833eb;
        text-align: center;
        padding: 5px 10px;
        font-weight: 900;
        border-radius: 10px;
        border: 2px solid black;
      }
      .faible {
          background-color: green;
      }
      .haute {
          background-color: red;
      }
      .moyenne {
          background-color: orange;
      }
      #qui{
        margin-top: 10px;
      }
      .nomTache { background-color: #6b7fd1; text-align: center; padding: 5px; border-radius: 10px; }
      .taskDescritption { background-color: #72dbefff; padding: 5px 10px; border-radius: 10px; font-weight: bold; }
      .date { background-color: #333; color: aqua; padding: 10px; border-radius: 10px; text-align:center; font-size:1.2rem; }

      /* --- Responsive --- */
      @media(max-width: 768px) {
        .container { flex-direction: column; }
        .form-container, .tasks-container, .purchase-container { width: 90%; }
        button { width: 100%; }
      }

      .date-time {
        display: flex;
        justify-content: center; /* centre horizontalement */
        gap: 10px; /* espace entre date et heure */
        margin-bottom : 10px;
      }
      .date-time p {
        margin: 0; /* supprime les marges par défaut */
      }

      
  body
    .container
      .form-container
        p.titre Tasks To Do
        .formDate
          .date-time
            p#dateJour 
            p#heure 

        form(action="/" method="post")
          label(for="task") Tâches :
          input(type="text" id="task" name="task" required)
          
          label(for="date") Date et Heure :
          input(type="datetime-local" id="date" name="date")
          
          label(for="description") Descriptions :
          textarea(id="description" name="description" rows="1")
          
          .priority-qui-container
            label(for="priority" class="priority") 
            select(name="priority" id="priority")
                option(value="") Priorité 
                option(value="haute") Haute
                option(value="moyenne") Moyenne
                option(value="faible") Faible

            label(for="qui" class="qui") 
            select(name="qui" id="qui")
                option(value="") Qui ?
                option(value="Lola") Lola
                option(value="David") David
                option(value="Les 2") Les 2
          
          button(type="submit" class="button-submit-taches") Ajouter
          

      .tasks-container
        each task in tasks
          .task(data-task-id=task._id)(class=task.priority)
                .task-header
                //- p.date #{new Intl.DateTimeFormat('fr-FR').format(new Date(task.date))}
                //- p.date #{new Intl.DateTimeFormat('fr-FR', { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' }).format(new Date(task.date))}
                p.date #{new Intl.DateTimeFormat('fr-FR', { day: 'numeric', month: 'long', year: 'numeric'}).format(new Date(task.date))}
                  p.date #{new Intl.DateTimeFormat('fr-FR', { hour: '2-digit', minute: '2-digit'}).format(new Date(task.date))}
 
                h3.nomQui #{task.qui}  
                h3.nomTache #{task.name}
                p.taskDescritption Commentaire : #{task.description}
                button(type="button" onclick="deleteTask(this)" class="button-delete") Supprimer

      .purchase-container
        p.titre Courses
          form(action="/courses" method="post")
            label(for="buy") 
            input(type="text" id="buy" name="buy" required)
            button(type="submit" class="button-submit") Ajouter  
        
        each course in courses
          .purchase-item(data-course-id=course._id)
            h3.course #{course.name}
            button(type="button" onclick="modifyCourse(this)" class="button-modify") Modifier
            button(type="button" onclick="deleteCourse(this)" class="button-delete") Supprimer


                               

    script(src="/js/script.js")
    script.
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
          }, function(err) {
            console.log('ServiceWorker registration failed: ', err);
          });
        });
      }
